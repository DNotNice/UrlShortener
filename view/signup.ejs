<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
</head>
<body>
    <h1>SignUp</h1>
    <form id="userDetails" >
        <label> Enter your name</label>
        <input type = "text" required name = "name"/>
        <label> Email</label>
        <input type = "email" required name = "email"/>
        <label> Password</label>
        <input type = "password" required name = "password"/>
        <button type="submit">SignUp</button>
    </form>
    <div class="errorBox"> </div>
    <script>
        const form = document.getElementById("userDetails")
        const errorBosx = document.getElementsByClassName("errorBox")
        form.addEventListener("submit" , async(e)=>{
            e.preventDefault();
            const name = form.name.value
            const email = form.email.value 
            const password = form.password.value 
            try {
                
                const res = await fetch('/user/signup' ,{
                    method :"POST",
                    body : JSON.stringify({name , email , password}),
                    headers :  { 'Content-Type': 'application/json'}
                })
                if(res.status === 201){
                    window.location.replace('/login')
                }else{
                    errorBosx.innerText("email already exists")
                }
               // console.log(res)
    
            } catch (error) {
                
            }
        })
        
    </script>
</body>
</html>